<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ticketing98 - New Ticket</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <link href="https://unpkg.com/98.css@0.1.21/dist/98.css" rel="stylesheet"/>
    <link href="css/styles.css" rel="stylesheet"/>
    <script defer src="js/index.js"></script>
    <script src="js/formHelper.js"></script>
</head>
<body class="common-body">
<div class="window" id="sidenav">
    <div class="title-bar">
        <div class="title-bar-text">Ticketing98</div>
    </div>
    <div class="window-body sidenav-body">
        <button onclick="location.href = 'dashboard.html'">Dashboard</button>
        <button onclick="location.href = 'projects.html'">Projects</button>
        <button onclick="location.href = 'tickets.html'">Tickets</button>
        <button onclick="location.href = 'profile.html'">Profile</button>
        <button onclick="location.href = 'settings.html'">Settings</button>
    </div>
</div>
<div class="window" id="main">
    <div class="title-bar">
        <div class="title-bar-text">Ticket Wizard</div>
    </div>
    <div class="window-body" style="display: flex; flex-direction: column; align-items: flex-start">
        <h4 style="flex-shrink: 0">Ticket Wizard</h4>
        <div class="window-content">
            <form id="create-ticket-form" class="basic-form">
                <div class="field-row-stacked">
                    <label for="project">Target Project</label>
                    <select id="project">
                        <option hidden value="">Select Project</option>
                        <option>Skyblocker</option>
                        <option>Other</option>
                    </select>
                    <div id="project-error" class="hidden font-13px error-message">
                        <img src="icons/msg_error-2.png" alt="Error Project" width="16" height="16">
                        <span>A ticket must be linked to a project!</span>
                    </div>
                </div>

                <div class="field-row-stacked">
                    <label for="name">Ticket Name</label>
                    <input id="name" type="text"/>
                    <div id="name-error" class="hidden font-13px error-message">
                        <img src="icons/msg_error-2.png" alt="Error Name" width="16" height="16">
                        <span>A ticket must have a name!</span>
                    </div>
                </div>

                <!-- Dropdowns -->
                <div class="field-row-stacked">
                    <label for="ticket-type">Ticket Type</label>
                    <select id="ticket-type">
                        <option hidden value="">Select Type</option>
                        <option>Task</option>
                        <option>Issue</option>
                    </select>
                    <div id="ticket-type-error" class="hidden font-13px error-message">
                        <img src="icons/msg_error-2.png" alt="Error Ticket Type" width="16" height="16">
                        <span>A ticket must have a type!</span>
                    </div>
                </div>
                <div class="field-row-stacked">
                    <label for="priority">Priority</label>
                    <select id="priority">
                        <option hidden value="">Select Priority</option>
                        <option>3 - Must</option>
                        <option>2 - Should</option>
                        <option>1 - Could</option>
                    </select>
                    <div id="priority-error" class="hidden font-13px error-message">
                        <img src="icons/msg_error-2.png" alt="Error Priority" width="16" height="16">
                        <span>A ticket must have a priority!</span>
                    </div>
                </div>
                <div class="field-row-stacked" style="width: 300px">
                    <label for="description">Description</label>
                    <textarea id="description" rows="8"></textarea>
                </div>
            </form>
            <script>
                document.getElementById('create-ticket-form').addEventListener('submit', (e) => {
                    e.preventDefault();
                    let valid = true;
                    valid &= checkInput('project', 'project-error', [emptyCondition("A ticket must be linked to a project!")]);
                    valid &= checkInput('name', 'name-error', [emptyCondition("A ticket must have a name!")]);
                    valid &= checkInput('ticket-type', 'ticket-type-error', [emptyCondition("A ticket must have a type!")]);
                    valid &= checkInput('priority', 'priority-error', [emptyCondition("A ticket must have to a priority!")]);
                    if (valid) location.href = 'ticket.html'
                })
            </script>
        </div>
        <p>This will create a ticket for the 'Skyblocker' project.</p>
        <input form="create-ticket-form" type="submit" value="Create Ticket"/>
    </div>
</div>
<div class="window bottom-nav-bar">
    <button class="start-menu-button" onclick="startMenuClick()">
        <img alt="Start Icon" src="icons/windows-0.png">
        <span><b>Start Menu</b></span>
    </button>
</div>
</body>
</html>